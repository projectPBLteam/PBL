<!DOCTYPE html> <html>
    <head>
        <meta charset="UTF-8"> <title>ë°ì´í„° ì´ìš©</title>

        <style>
            /* íŒì—… ë°°ê²½ (ê¸°ë³¸ ìˆ¨ê¹€) */
            .modal-overlay {
                display: none; 
                position: fixed; 
                z-index: 1000; 
                left: 0;
                top: 0;
                width: 100%; 
                height: 100%; 
                overflow: auto; 
                background-color: rgba(0,0,0,0.5); /* ë°˜íˆ¬ëª… ê²€ì€ ë°°ê²½ */
            }
            
            /* íŒì—… ë‚´ìš© ìƒì */
            .modal-content {
                background-color: #fefefe;
                margin: 15% auto; 
                padding: 20px 30px; /* ì¢Œìš° ì—¬ë°±ì„ ì¡°ê¸ˆ ë” ì¤ë‹ˆë‹¤ */
                border: 1px solid #888;
                width: 90%;
                max-width: 500px;
                border-radius: 8px;
                box-shadow: 0 4px 10px 0 rgba(0,0,0,0.2);
            }

            .modal-content h3 {
                margin-top: 0;
                text-align: center; /* ì œëª© ì¤‘ì•™ ì •ë ¬ */
            }

            .modal-content ul {
                list-style-type: none; /* ì  ì œê±° */
                padding-left: 0;
            }

            /* ğŸ’¡ [ìˆ˜ì •] 
              li í•­ëª©ì„ flexboxë¡œ ì •ë ¬í•©ë‹ˆë‹¤.
            */
            .modal-content li {
                font-size: 16px;
                padding: 8px 0;
                display: flex; /* Flexbox ë ˆì´ì•„ì›ƒ ì ìš© */
                align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            }

            /* ğŸ’¡ [ìˆ˜ì •] 
              ì²« ë²ˆì§¸ span(ë ˆì´ë¸”)ì— ê³ ì • ë„ˆë¹„ë¥¼ ì¤ë‹ˆë‹¤.
            */
            .modal-content li span:first-child {
                font-weight: 600;
                color: #333; /* ë ˆì´ë¸” ìƒ‰ìƒ ì‚´ì§ ì–´ë‘¡ê²Œ */
                min-width: 180px; /* ğŸ‘ˆ (í•µì‹¬) ë ˆì´ë¸”ì˜ ìµœì†Œ ë„ˆë¹„ ì§€ì • */
                display: inline-block;
            }
            
            /* ğŸ’¡ [ì¶”ê°€] 
              ë‘ ë²ˆì§¸ span(ê°’) ìŠ¤íƒ€ì¼
            */
            .modal-content li span:last-child {
                color: #555; /* ê°’ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
            }
            
            /* íŒì—… ë‹«ê¸° ë²„íŠ¼ */
            .modal-button {
                background-color: #0d6efd; /* ì´ë¯¸ì§€ì™€ ìœ ì‚¬í•œ íŒŒë€ìƒ‰ */
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                display: block; /* ë¸”ë¡ ë ˆë²¨ë¡œ ë³€ê²½ */
                width: 100px; /* ë„ˆë¹„ ì§€ì • */
                margin: 20px auto 0; /* ìƒë‹¨ ì—¬ë°± ë° ì¤‘ì•™ ì •ë ¬ */
                font-size: 15px;
            }
        </style>
        </head>
    <body>
        <h1>ë°ì´í„° ëª©ë¡</h1>
        
        <h2>ì—…ë¡œë“œëœ íŒŒì¼ ëª©ë¡</h2>
        {% if files %}
        <form method="get" action="/PISafeZone/datause/page3">
        <table border="1" cellpadding="6" cellspacing="0">
            <thead>
                <tr>
                    <th>ì„ íƒ</th>
                    <th>ë°ì´í„°ëª…</th>
                    <th>ë°ì´í„° ì œê³µì</th>
                    <th>ë°ì´í„° ì—…ë¡œë“œ ë‚ ì§œ</th>
                    <th>ë°ì´í„° ì´ìš©ìˆ˜</th>
                    <th>ë°ì´í„° ìƒì„¸ ë³´ê¸°</th>
                </tr>
            </thead>
            <tbody>
                {% for f in files %}
                <tr>
                    <td>
                        <input type="radio" name="data" value="{{ f.data_id }}">
                    </td>
                    <td>{{ f.data_name }}</td>
                    <td>{{ f.user.first_name|default:f.user.email }}</td>
                    <td>{{ f.data_date|date:"Y.m.d" }}</td>
                    <td>{{ f.data_usage }}</td>
                    <td>
                        <button type="button" 
                                onclick="openModal(
                                    '{{ f.data_name }}',
                                    '{{ f.user.first_name|default:f.user.email }}',
                                    '{{ f.data_date|date:"Y.m.d" }}',
                                    '{{ f.data_usage }}'
                                )">
                            ìƒì„¸ ì •ë³´
                        </button>
                        </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div style="margin-top:16px; text-align:right;">
            <button type="submit">ë°ì´í„° ë¶„ì„</button>
        </div>
        </form>
        {% else %}
            <p>í‘œì‹œí•  íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}


        <div id="detailsModal" class="modal-overlay">
            <div class="modal-content">
                <h3>ë°ì´í„° ìƒì„¸ ì •ë³´</h3>
                
                <ul>
                    <li><span>â€¢ ë°ì´í„°ëª…</span> <span id="modal-data-name"></span></li>
                    <li><span>â€¢ ë°ì´í„° ì œê³µì</span> <span id="modal-user-email"></span></li>
                    <li><span>â€¢ ë°ì´í„° ì—…ë¡œë“œ ë‚ ì§œ</span> <span id="modal-data-date"></span></li>
                    <li><span>â€¢ ë°ì´í„° ì´ìš©ìˆ˜</span> <span id="modal-data-usage"></span></li>
                    <li><span>â€¢ ì œê³µ ì¹´íƒˆë¡œê·¸</span> <span>(ì •ë³´ ì—†ìŒ)</span></li>
                    <li><span>â€¢ ê¸°íƒ€ ë°ì´í„° ìƒì„¸ ì •ë³´</span> <span>(ì •ë³´ ì—†ìŒ)</span></li>
                </ul>
                
                <button type="button" class="modal-button" onclick="closeModal()">í™•ì¸</button>
            </div>
        </div>
        <script>
            // ëª¨ë‹¬ DOM ìš”ì†Œë¥¼ ë¯¸ë¦¬ ì°¾ì•„ë‘¡ë‹ˆë‹¤.
            var modal = document.getElementById('detailsModal');
            
            // íŒì—… ì•ˆì˜ í…ìŠ¤íŠ¸ê°€ í‘œì‹œë  <span> ìš”ì†Œë“¤ì„ ì°¾ì•„ë‘¡ë‹ˆë‹¤.
            var modalDataName = document.getElementById('modal-data-name');
            var modalUserEmail = document.getElementById('modal-user-email');
            var modalDataDate = document.getElementById('modal-data-date');
            var modalDataUsage = document.getElementById('modal-data-usage');

            // "ìƒì„¸ì •ë³´" ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ì„ ì—¬ëŠ” í•¨ìˆ˜
            function openModal(name, email, date, usage) {
                // ì „ë‹¬ë°›ì€ ê°’ìœ¼ë¡œ íŒì—…ì˜ ë‚´ìš©ì„ ì±„ì›ë‹ˆë‹¤.
                modalDataName.textContent = name;
                modalUserEmail.textContent = email;
                modalDataDate.textContent = date;
                modalDataUsage.textContent = usage;
                
                // íŒì—…ì„ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
                modal.style.display = 'block';
            }

            // "í™•ì¸" ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ì„ ë‹«ëŠ” í•¨ìˆ˜
            function closeModal() {
                modal.style.display = 'none';
            }

            // ëª¨ë‹¬ ë°”ê¹¥ì˜ ì–´ë‘ìš´ ë°°ê²½ì„ í´ë¦­í•´ë„ ë‹«íˆë„ë¡ ì„¤ì •
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }
        </script>
        </body>
</html>